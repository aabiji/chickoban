<!doctypehtml><html lang=en-us><head><title>Chickoban</title><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><style>@font-face{font-family:puffy;src:url("assets/puffy.otf") format("otf")}body,html{width:100%;height:100%;margin:0;font-family:puffy;background-color:#a0d2eb}h1,h3{text-align:center}#progress{background-color:#00008b;width:1px;height:100%;border-radius:8px;transition:width .3s ease}#progress-container{width:200px;height:8px;border-radius:8px;background-color:#d3d3d3;border:1px dashed #d3d3d3;overflow:hidden}#error-screen,#loading-screen{display:none;justify-content:center;flex-direction:column;align-items:center;width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0}#canvas{display:none;margin:auto;position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}#play-button{width:200px;color:#fff;border:none;outline:0;background-color:#f25c54;padding:16px 60px;border-radius:40px;font-size:1.5rem;font-family:puffy;cursor:pointer;margin-top:25px}#play-button:hover:not(:disabled){background-color:#e5534b}#play-button:disabled{background-color:#f6928d;border-color:#f6928d;cursor:not-allowed}</style></head><body><div id=loading-screen><h1 id=loading-message></h1><div id=progress-container><div id=progress></div></div><button disabled id=play-button>Play</button></div><div id=error-screen><h1 id=error-msg></h1><h3>Maybe reload?</h3></div><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas><script>let progressContainer=document.getElementById("progress-container"),progress=document.getElementById("progress"),loadingScreen=document.getElementById("loading-screen"),playButton=document.getElementById("play-button");const loadingMsg=document.getElementById("loading-message");let errorScreen=document.getElementById("error-screen"),errorMsg=document.getElementById("error-msg"),canvas=document.getElementById("canvas");function showScreen(e){loadingScreen.style.display="none",errorScreen.style.display="none",canvas.style.display="none",e.style.display=e===canvas?"block":"flex",canvas.style.zIndex="0",loadingScreen.style.zIndex="10",errorScreen.style.zIndex="20"}showScreen(loadingScreen),playButton.onclick=e=>{showScreen(canvas),resizeCanvas()};const resizeCanvas=()=>{const e=window.devicePixelRatio||1,t=window.innerWidth,n=window.innerHeight;canvas.width=t*e,canvas.height=n*e,canvas.style.width=`${t}px`,canvas.style.height=`${n}px`,Module._resize(t,n)},setStatus=e=>{if(e.includes("Running"))return loadingMsg.innerText="Game loaded",void(playButton.disabled=!1);const t=e.split("error: ");if(t&&2==t.length)return errorMsg.innerText=t[1],void showScreen(errorScreen);const n=e.match(/(\d+(\.\d+)?)/g);if(n&&2==n.length){const e=parseInt(n[0])/parseInt(n[1]);progress.style.width=e*progressContainer.offsetWidth+"px",loadingMsg.innerText="Loading..."}};var Module={canvas:canvas,setStatus:setStatus,preRun:[]};Module.preRun.push((()=>{navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then((e=>{e||console.log("error: Please allow persistent storage for this site")})),FS.mkdir("/game-data"),FS.mount(IDBFS,{},"/game-data"),FS.syncfs(!0,(e=>{e&&Module.setStatus("error: Couldn't sync your game data :(")}))}));let startX=0,startY=0;document.ontouchstart=e=>{const t=e.touches[0];startX=t.clientX,startY=t.clientY},document.ontouchend=e=>{const t=e.changedTouches[0],n=t.clientX-startX,s=t.clientY-startY;Math.abs(n)>Math.abs(s)?(n>30&&Module._handleSwipe("right"),n<-30&&Module._handleSwipe("left")):(s>30&&Module._handleSwipe("down"),s<-30&&Module._handleSwipe("up"))},canvas.addEventListener("webglcontextlost",(e=>{Module.setStatus("error: WebGL context was lost"),e.preventDefault()})),window.onresize=()=>resizeCanvas(),window.onerror=e=>Module.setStatus("error: Something went wrong :("),window.beforeunload=()=>{FS.syncfs(!1,(e=>{e&&Module.setStatus("error: Couldn't sync your game data :(")}))}</script><script async src=chickoban.js></script></body></html>